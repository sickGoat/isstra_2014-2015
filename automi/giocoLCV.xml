<?xml version="1.0" encoding="utf-8"?><!DOCTYPE nta PUBLIC '-//Uppaal Team//DTD Flat System 1.1//EN' 'http://www.it.uu.se/research/group/darts/uppaal/flat-1_1.dtd'><nta><declaration>// Place global declarations here.
const int L=0, C=1, V=2;
typedef int[0,2] tip;
bool moloA[tip]={true,true,true}; 
bool moloB[tip]={false,false,false};
bool b[tip]={false,false,false}; //contenuto barca
chan getA[tip], putA[tip], getB[tip], putB[tip];

bool goal(){
  return forall(i:tip) moloB[i];
}

bool free(){//ritorna true se la barca è vuota
  return forall(i:tip) !b[i];
}

bool busy(){//ritorna true se la barca non è vuota
  return exists(i:tip) b[i];
}</declaration><template><name x="5" y="5">Barca</name><declaration>// Place local declarations here.
</declaration><location id="id0" x="16" y="264"><committed/></location><location id="id1" x="16" y="216"><committed/></location><location id="id2" x="16" y="176"><committed/></location><location id="id3" x="8" y="-224"><committed/></location><location id="id4" x="8" y="-296"><committed/></location><location id="id5" x="8" y="-360"><committed/></location><location id="id6" x="216" y="-72"><name x="232" y="-88">ritorno</name></location><location id="id7" x="88" y="-72"><name x="104" y="-96">SB</name></location><location id="id8" x="-48" y="-72"><name x="-104" y="-72">andata</name></location><location id="id9" x="-192" y="-72"><name x="-232" y="-96">SA</name></location><init ref="id9"/><transition><source ref="id6"/><target ref="id9"/><label kind="guard" x="-144" y="-456">b[C]&amp;&amp;moloA[V]||b[L]&amp;&amp;moloA[C]||b[V]&amp;&amp;moloA[C]</label><nail x="224" y="-80"/><nail x="336" y="-440"/><nail x="-296" y="-440"/></transition><transition><source ref="id9"/><target ref="id8"/><label kind="guard" x="-168" y="-88">busy()</label></transition><transition><source ref="id8"/><target ref="id7"/><label kind="guard" x="-288" y="272">b[C]&amp;&amp;moloB[L]&amp;&amp;moloB[V]</label><label kind="synchronisation" x="-104" y="272">putB[C]!</label><label kind="assignment" x="-48" y="272">b[C]=false</label><nail x="-304" y="288"/><nail x="376" y="288"/></transition><transition><source ref="id6"/><target ref="id9"/><label kind="guard" x="-72" y="-192">b[C]&amp;&amp;moloA[L]&amp;&amp;moloA[V]</label><label kind="synchronisation" x="-64" y="-176">putA[C]!</label><label kind="assignment" x="-8" y="-176">b[C]=false</label><nail x="136" y="-176"/><nail x="-120" y="-176"/></transition><transition><source ref="id0"/><target ref="id7"/><label kind="synchronisation" x="40" y="248">getB[C]!</label><label kind="assignment" x="96" y="248">b[C]=true</label><nail x="312" y="264"/></transition><transition><source ref="id8"/><target ref="id0"/><label kind="guard" x="-232" y="248">b[L]&amp;&amp;moloB[C]</label><label kind="synchronisation" x="-120" y="248">putB[L]!</label><label kind="assignment" x="-64" y="248">b[L]=false</label><nail x="-256" y="264"/></transition><transition><source ref="id1"/><target ref="id7"/><label kind="synchronisation" x="40" y="200">getB[L]!</label><label kind="assignment" x="96" y="200">b[L]=true</label><nail x="240" y="216"/></transition><transition><source ref="id8"/><target ref="id1"/><label kind="guard" x="-176" y="200">b[C]&amp;&amp;moloB[L]&amp;&amp;!moloB[V]</label><label kind="synchronisation" x="-168" y="216">putB[C]!</label><label kind="assignment" x="-112" y="216">b[C]=false</label><nail x="-192" y="216"/></transition><transition><source ref="id2"/><target ref="id7"/><label kind="synchronisation" x="32" y="160">getB[C]!</label><label kind="assignment" x="96" y="160">b[C]=true</label><nail x="56" y="176"/><nail x="176" y="176"/></transition><transition><source ref="id8"/><target ref="id2"/><label kind="guard" x="-112" y="144">b[V]&amp;&amp;moloB[C]</label><label kind="synchronisation" x="-128" y="160">putB[V]!</label><label kind="assignment" x="-72" y="160">b[V]=false</label><nail x="-136" y="176"/></transition><transition><source ref="id3"/><target ref="id9"/><label kind="synchronisation" x="-120" y="-240">getA[C]!</label><label kind="assignment" x="-64" y="-240">b[C]=true</label><nail x="-8" y="-224"/><nail x="-120" y="-224"/></transition><transition><source ref="id6"/><target ref="id3"/><label kind="guard" x="32" y="-240">b[V]&amp;&amp;moloA[C]</label><label kind="synchronisation" x="32" y="-224">putA[V]!</label><label kind="assignment" x="88" y="-224">b[V]=false</label><nail x="144" y="-224"/></transition><transition><source ref="id4"/><target ref="id9"/><label kind="synchronisation" x="-128" y="-312">getA[L]!</label><label kind="assignment" x="-72" y="-312">b[L]=true</label><nail x="-144" y="-296"/></transition><transition><source ref="id6"/><target ref="id4"/><label kind="guard" x="24" y="-312">b[C]&amp;&amp;moloA[L]&amp;&amp;!moloA[V]</label><label kind="synchronisation" x="104" y="-296">putA[C]!</label><label kind="assignment" x="32" y="-296">b[C]=false</label><nail x="160" y="-296"/></transition><transition><source ref="id6"/><target ref="id9"/><label kind="guard" x="-56" y="-416">b[L]&amp;&amp;!moloA[C]</label><label kind="synchronisation" x="56" y="-416">putA[L]!</label><label kind="assignment" x="112" y="-416">b[L]=false</label><nail x="280" y="-400"/><nail x="-240" y="-400"/></transition><transition><source ref="id5"/><target ref="id9"/><label kind="synchronisation" x="-136" y="-376">getA[C]!</label><label kind="assignment" x="-72" y="-376">b[C]=true</label><nail x="-208" y="-360"/></transition><transition><source ref="id6"/><target ref="id5"/><label kind="guard" x="32" y="-376">b[L]&amp;&amp;moloA[C]</label><label kind="synchronisation" x="144" y="-376">putA[L]!</label><label kind="assignment" x="200" y="-376">b[L]=false</label><nail x="224" y="-360"/></transition><transition><source ref="id6"/><target ref="id9"/><label kind="guard" x="-152" y="-344">b[C]&amp;&amp;!moloA[L]&amp;&amp;!moloA[V]</label><label kind="synchronisation" x="40" y="-344">putA[C]!</label><label kind="assignment" x="104" y="-344">b[C]=false</label><nail x="184" y="-328"/><nail x="-160" y="-328"/></transition><transition><source ref="id6"/><target ref="id9"/><label kind="guard" x="-112" y="-280">b[V]&amp;&amp;!moloA[C]</label><label kind="synchronisation" x="0" y="-280">putA[V]!</label><label kind="assignment" x="56" y="-280">b[V]=false</label><nail x="144" y="-256"/><nail x="-120" y="-256"/></transition><transition><source ref="id6"/><target ref="id9"/><label kind="guard" x="-8" y="112">free()</label><nail x="272" y="-72"/><nail x="272" y="112"/><nail x="-232" y="112"/><nail x="-232" y="-72"/></transition><transition><source ref="id7"/><target ref="id6"/><label kind="guard" x="136" y="-96">!goal()</label></transition><transition><source ref="id7"/><target ref="id6"/><label kind="guard" x="80" y="40">!goal()&amp;&amp;free()&amp;&amp;moloB[V]</label><label kind="synchronisation" x="104" y="56">getB[V]!</label><label kind="assignment" x="160" y="56">b[V]=true</label><nail x="64" y="56"/><nail x="256" y="56"/></transition><transition><source ref="id7"/><target ref="id6"/><label kind="guard" x="96" y="0">!goal()&amp;&amp;free()&amp;&amp;moloB[C]</label><label kind="synchronisation" x="104" y="16">getB[C]!</label><label kind="assignment" x="160" y="16">b[C]=true</label><nail x="104" y="16"/><nail x="208" y="16"/></transition><transition><source ref="id7"/><target ref="id6"/><label kind="guard" x="104" y="-56">!goal()&amp;&amp; free()&amp;&amp;moloB[L]</label><label kind="synchronisation" x="120" y="-40">getB[L]!</label><label kind="assignment" x="176" y="-40">b[L]=true</label><nail x="120" y="-16"/><nail x="176" y="-16"/><nail x="200" y="-16"/></transition><transition><source ref="id8"/><target ref="id7"/><label kind="guard" x="-32" y="-104">b[V]&amp;&amp;!moloB[C]</label><label kind="synchronisation" x="-8" y="-88">putB[V]!</label><label kind="assignment" x="-16" y="-72">b[V]=false</label><nail x="-32" y="-104"/><nail x="72" y="-104"/></transition><transition><source ref="id8"/><target ref="id7"/><label kind="guard" x="-40" y="-48">b[C]&amp;&amp;(!moloB[L]||
moloB[V])</label><label kind="synchronisation" x="-40" y="-16">putB[C]!</label><label kind="assignment" x="16" y="-16">b[C]=false</label><nail x="-24" y="-32"/><nail x="64" y="-32"/></transition><transition><source ref="id8"/><target ref="id7"/><label kind="guard" x="-40" y="56">b[L]&amp;&amp;!moloB[C]</label><label kind="synchronisation" x="-40" y="80">putB[L]!</label><label kind="assignment" x="16" y="80">b[L]=false</label><nail x="-48" y="80"/><nail x="-16" y="80"/><nail x="96" y="80"/></transition><transition><source ref="id9"/><target ref="id8"/><label kind="guard" x="-224" y="24">free()&amp;&amp;moloA[L]&amp;&amp;
!(moloA[C]&amp;&amp;moloA[V])</label><label kind="synchronisation" x="-208" y="64">getA[L]!</label><label kind="assignment" x="-208" y="80">b[L]=true</label><nail x="-184" y="64"/><nail x="-64" y="64"/></transition><transition><source ref="id9"/><target ref="id8"/><label kind="guard" x="-144" y="-144">free()&amp;&amp;moloA[V]&amp;&amp;
!(moloA[L]&amp;&amp;moloA[C])</label><label kind="synchronisation" x="-160" y="-112">getA[V]!</label><label kind="assignment" x="-104" y="-112">b[V]=true</label><nail x="-160" y="-112"/><nail x="-88" y="-112"/></transition><transition><source ref="id9"/><target ref="id8"/><label kind="guard" x="-200" y="-40">free()&amp;&amp;moloA[C]</label><label kind="synchronisation" x="-208" y="-24">getA[C]!</label><label kind="assignment" x="-152" y="-24">b[C]=true</label><nail x="-168" y="-24"/><nail x="-72" y="-24"/></transition></template><template><name>Molo</name><parameter>bool &amp;m[tip], chan &amp;get[tip], chan &amp;put[tip]</parameter><location id="id10" x="-120" y="-48"><name x="-176" y="-56">Home</name></location><init ref="id10"/><transition><source ref="id10"/><target ref="id10"/><label kind="guard" x="-168" y="0">!m[V]</label><label kind="synchronisation" x="-168" y="16">put[V]?</label><label kind="assignment" x="-168" y="32">m[V]=true</label><nail x="-120" y="8"/><nail x="-152" y="0"/></transition><transition><source ref="id10"/><target ref="id10"/><label kind="guard" x="-80" y="-8">!m[C]</label><label kind="synchronisation" x="-80" y="8">put[C]?</label><label kind="assignment" x="-80" y="24">m[C]=true</label><nail x="-104" y="-40"/><nail x="-72" y="-8"/><nail x="-96" y="8"/></transition><transition><source ref="id10"/><target ref="id10"/><label kind="guard" x="-48" y="-64">!m[L]</label><label kind="synchronisation" x="-48" y="-48">put[L]?</label><label kind="assignment" x="-48" y="-32">m[L]=true</label><nail x="-96" y="-48"/><nail x="-56" y="-48"/><nail x="-64" y="-24"/></transition><transition><source ref="id10"/><target ref="id10"/><label kind="guard" x="-72" y="-120">m[V]</label><label kind="synchronisation" x="-64" y="-104">get[V]?</label><label kind="assignment" x="-56" y="-88">m[V]=false</label><nail x="-72" y="-96"/><nail x="-56" y="-72"/></transition><transition><source ref="id10"/><target ref="id10"/><label kind="guard" x="-136" y="-152">m[C]</label><label kind="synchronisation" x="-136" y="-136">get[C]?</label><label kind="assignment" x="-144" y="-120">m[C]=false</label><nail x="-120" y="-64"/><nail x="-128" y="-104"/><nail x="-96" y="-104"/></transition><transition><source ref="id10"/><target ref="id10"/><label kind="guard" x="-216" y="-128">m[L]</label><label kind="synchronisation" x="-224" y="-112">get[L]?</label><label kind="assignment" x="-240" y="-96">m[L]=false</label><nail x="-176" y="-72"/><nail x="-160" y="-96"/></transition></template><system>// Place template instantiations here.
spondaA=Molo( moloA, getA, putA );
spondaB=Molo( moloB, getB, putB );
// List one or more processes to be composed into a system.
system spondaA,spondaB,Barca;</system></nta>